this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates.Tree=Handlebars.template({1:function(e,n,t,a,r){var o,i,l=null!=n?n:{},s=t.helperMissing,d="function",c=e.escapeExpression;return'      <li class="node-container" data-id='+c((i=null!=(i=t.id||(null!=n?n.id:n))?i:s,typeof i===d?i.call(l,{name:"id",hash:{},data:r}):i))+'>\n          <div class="node-head">\n              <div class="node-img">\n'+(null!=(o=t["if"].call(l,null!=n?n.node:n,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.program(4,r,0),data:r}))?o:"")+'              </div>\n              <div class="node-head-content">\n                  '+c((i=null!=(i=t.label||(null!=n?n.label:n))?i:s,typeof i===d?i.call(l,{name:"label",hash:{},data:r}):i))+"\n              </div>\n          </div>\n"+(null!=(o=t["if"].call(l,null!=n?n.data:n,{name:"if",hash:{},fn:e.program(6,r,0),inverse:e.noop,data:r}))?o:"")+"      </li>\n"},2:function(e,n,t,a,r){return'                  <img src="img/plus.png" class="node" alt="node" width="15" height="15" />\n'},4:function(e,n,t,a,r){return'                  <img src="img/minus.png" class="leaf" alt="leaf" width="15" height="15" />\n'},6:function(e,n,t,a,r){var o;return null!=(o=e.invokePartial(a.tree,n,{name:"tree",data:r,indent:"            ",helpers:t,partials:a,decorators:e.decorators}))?o:""},compiler:[7,">= 4.0.0"],main:function(e,n,t,a,r){var o;return'  <ul class="node-children">\n'+(null!=(o=t.each.call(null!=n?n:{},null!=n?n.data:n,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))?o:"")+"  </ul>\n"},usePartial:!0,useData:!0}),this.Handlebars.templates.TypeAheadTreePicker=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(e,n,t,a,r){var o;return'<div class="dropdown-container">\n'+(null!=(o=e.invokePartial(a.tree,n,{name:"tree",data:r,indent:"  ",helpers:t,partials:a,decorators:e.decorators}))?o:"")+"</div>\n"},usePartial:!0,useData:!0}),function(){for(var e,n=function(){},t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],a=t.length,r=window.console=window.console||{};a--;)e=t[a],r[e]||(r[e]=n)}(),function(e,n,t,a,r){"use strict";var o={init:function(n,t){var a=this;a.$inputElement=n,"object"==typeof t&&(a.options=e.extend({},e.fn.TypeAheadTreePicker.options,t)),a.registerHelper(),a.registerTemplates(),a.createDom(),a.addEvents(),a.renderDom(),a.debounce()},registerHelper:function(){a.registerHelper("nodeStatus",function(e){return e?"hide":"show"})},registerTemplates:function(){a.registerPartial("tree",a.templates.Tree)},createDom:function(){var n=this;n.$treePickerContainer=e("<div></div>",{"class":"treePicker-container",tabIndex:0}),n.$hiddenInputValue=e("<input />",{type:"text",id:"value",required:"required",css:{display:"none"}}),n.$dropDown=e(a.templates.TypeAheadTreePicker({data:n.options.data}))},addEvents:function(){var n=this;n.$inputElement.on("focus",function(){n.showDropDown()});var t=function(){if(n.$inputElement.val().trim().length>0)n.searchDropDown();else{var e=n.createTreeStructure(n.options.data);n.$dropDown.empty().append(e)}};n.$inputElement.on("keyup",n.debounce(t,n.options.delay)),n.$dropDown.on("click",".node-head",function(t){t.stopPropagation();var a=e(t.target);a.parent().hasClass("node-img")?n.nodeHandler(a):n.selectedValueHandler(a)})},showDropDown:function(){var e=this,n=e.getPosition();e.$dropDown.css(n).show()},searchDropDown:function(){var e=this,n=e.filterData(),t=e.createTreeStructure(n);e.postProcessSearch(e.$inputElement.val().toLowerCase(),t),e.$dropDown.empty().append(t)},postProcessSearch:function(n,t){var a=t.find(".node-head-content");a.each(function(t,a){var r=e(a),o=r.html().trim().toLowerCase();if(o.indexOf(n)>-1){var i=r.parents(".node-children").show();i.each(function(n,t){var a=e(t);a.prev().find("img").attr("src","img/minus.png").removeClass("node").addClass("leaf")})}})},createTreeStructure:function(n){return e(a.templates.Tree({data:n}))},hideDropDown:function(){var e=this;e.$dropDown.hide()},getPosition:function(){var e=this,n=e.$inputElement.offset(),t=e.$inputElement.height();return{top:n.top+t+10,left:n.left}},selectedValueHandler:function(e){var n=this;n.updateInputValue(e),n.setHiddenInputValue(e),n.hideDropDown()},setHiddenInputValue:function(e){var n=this;n.$hiddenInputValue.val(e.closest(".node-container").data("id"))},filterData:function(){var n=this,t=n.$inputElement.val(),a=e.extend(!0,[],n.options.data),r=new RegExp("^("+t+")","i");return n.find(r,a)},find:function(e,n,t){var a=this;if(a.options.serverSide&&"function"==typeof a.options.serverSearch)return a.options.serverSearch(e);for(var o=n.length-1;o>=0;o--){var i=n[o];if(i.data&&a.find(e,i.data,i),a.options.keepChildren){if(i.data&&i.data.length>0||e.test(i.label.toLowerCase())||t!==r&&e.test(t.label.toLowerCase()))continue;n.splice(o,1)}else{if(i.data&&0===i.data.length&&delete i.data,i.data||e.test(i.label.toLowerCase()))continue;n.splice(o,1)}}return n},nodeHandler:function(e){var n=this,t=e.closest(".node-container"),a=t.children(".node-children");e.hasClass("node")?n.openNode(t,a,e):n.closeNode(t,a,e)},openNode:function(n,t,a){var r=this,o=n[0],i=t[0];if(e.contains(o,i))t.slideDown(function(){a.attr("src","img/minus.png").removeClass("node").addClass("leaf")});else if(r.options.serverSide&&"function"==typeof r.options.loadChildNodes){var l=r.options.loadChildNodes(n.data("id")),s=r.createTreeStructure(l).show();n.append(s)}},closeNode:function(n,t,a){var r=n[0],o=t[0];e.contains(r,o)&&t.slideUp(function(){a.attr("src","img/plus.png").removeClass("leaf").addClass("node")})},getChildren:function(e){var n=this;return n.options.serverSide&&"function"==typeof n.options.nodeCallback?n.options.nodeCallback(e):void console.log("server side is not enabled. Hence lazyloading of node children is not possible")},updateInputValue:function(e){var n,t=this;n=e.hasClass("node-head-content")?e.html().trim():e.children(".node-head-content").html().trim(),t.$inputElement.val(n)},renderDom:function(){var n=this;n.$inputElement.wrap(n.$treePickerContainer),n.$inputElement.after(n.$hiddenInputValue);var a=n.getPosition();n.$dropDown.css(a),e(t.body).append(n.$dropDown)},debounce:function(e,n,t){var a,r,o,i,l,s=this,d=function(){var c=s.now()-i;c<n&&c>=0?a=setTimeout(d,n-c):(a=null,t||(l=e.apply(o,r),a||(o=r=null)))};return function(){o=this,r=arguments,i=s.now();var c=t&&!a;return a||(a=setTimeout(d,n)),c&&(l=e.apply(o,r),o=r=null),l}},now:function(){return Date.now||function(){return(new Date).getTime()}}};e.fn.TypeAheadTreePicker=function(e){var n=Object.create(o);return n.init(this,e)},e.fn.TypeAheadTreePicker.options={serverSide:!1,delay:400,loadChildNodes:null,serverSearch:null}}(jQuery,window,document,Handlebars);